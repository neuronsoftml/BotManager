package app.model;import app.model.auxiliaryTools.ConfigFileUrl;import app.setting.BotConfig;import org.telegram.telegrambots.bots.TelegramLongPollingBot;import org.telegram.telegrambots.meta.api.methods.GetFile;import org.telegram.telegrambots.meta.api.objects.Document;import org.telegram.telegrambots.meta.api.objects.Update;import org.telegram.telegrambots.meta.exceptions.TelegramApiException;import java.io.File;import java.io.IOException;public class Bot extends TelegramLongPollingBot {    private final String botName = BotConfig.BOT_NAME.getValue();    private final String botToken = BotConfig.BOT_TOKEN.getValue();    private Processor processor;    private String urlFile;    @Override    public void onUpdateReceived(Update update) {        try {            if(update.hasCallbackQuery()){                execute(processor.executeProcessorButton(update));            }            else if (update.getMessage().hasDocument()){                String getId = String.valueOf(update.getMessage().getFrom().getId());                getFileTelegramService(update.getMessage().getDocument(),getId);                execute(processor.executeProcessorFile(urlFile));            }            else if(update.hasMessage()){                execute(processor.executeProcessorMessage(update));            }        } catch (IOException e) {            throw new RuntimeException(e);        } catch (TelegramApiException e) {            throw new RuntimeException(e);        }    }    @Override    public String getBotUsername() {        return botName;    }    @Override    public void onRegister() {        super.onRegister();        this.processor = Processor.getProcessor();    }    @Override    public String getBotToken(){        return botToken;    }    private void getFileTelegramService(Document doc, String id){        String doc_id = doc.getFileId();        String doc_name = doc.getFileName();        String doc_mine = doc.getMimeType();        long doc_size = Math.toIntExact(doc.getFileSize());        Document document = new Document();        document.setMimeType(doc_mine);        document.setFileName(doc_name);        document.setFileSize(doc_size);        document.setFileId(doc_id);        GetFile getFile = new GetFile();        getFile.setFileId(document.getFileId());        String urlSave = ConfigFileUrl.DOWNLOAD_FILE.getUrlLink();        try {            org.telegram.telegrambots.meta.api.objects.File file = execute(getFile);            downloadFile(file, new File(urlSave+id+"_"+doc_name));            this.urlFile = urlSave+id+"_"+doc_name;        } catch (TelegramApiException e) {            e.printStackTrace();        }    }}